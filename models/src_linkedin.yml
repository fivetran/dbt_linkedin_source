version: 2

sources:
  - name: linkedin
    schema: "{{ var('linkedin_ads_schema', 'linkedin_ads') }}"
    database: "{% if target.type != 'spark'%}{{ var('linkedin_ads_database', target.database) }}{% endif %}"

    loader: Fivetran
    loaded_at_field: _fivetran_synced

    tables:
      - name: ad_analytics_by_creative
        identifier: "{{ var('linkedin_ads_ad_analytics_by_creative_identifier', 'ad_analytics_by_creative') }}"
        description: Each record in this table represents the daily performance of ads at the creative level.
        columns:
          - name: creative_id
            description: The ID of the related creative.

          - name: day
            description: The day of the activity.

          - name: clicks
            description: The count of chargeable clicks.

          - name: impressions
            description: This is the count of "impressions" for Direct Ads and Sponsored Updates and "sends" for InMails.

          - name: cost_in_local_currency
            description: The cost of the ads in the local currency.

          - name: cost_in_usd
            description: The cost of the ads in the USD.

      - name: creative_history
        description: Each record represents a 'version' of a creative.
        identifier: "{{ var('linkedin_ads_creative_history_identifier', 'creative_history') }}"
        columns:
          - name: id
            description: Unique internal ID representing the creative.

          - name: last_modified_time
            description: The timestamp of when the version was updated.

          - name: created_time
            description: The timestamp of when the creative was created.

          - name: campaign_id
            description: The ID of the campaign the creative belongs to.

          - name: status
            description: |
                ACTIVE - Creative creation is complete and creative is available for review and serve.
                PAUSED - Creative creation is complete and creative is current, but should temporarily not be served. This status is not valid upon creation.
                DRAFT - Creative creation is incomplete and may still be edited.
                ARCHIVED - Creative creation is complete, but creative should not be served and should be separated from non-archived creatives in any UI.
                CANCELED - Creative is permanently canceled.

          - name: version_tag
            description: An integer representation of the version of the creative.

          - name: type 
            description: |
                TEXT_AD - Text with Sponsored Link to landing page on your site.
                SPONSORED_STATUS_UPDATE - Sponsored status update from a profile page.
                SPONSORED_INMAILS - Single message ad delivered to the member's inbox
                SPONSORED_MESSAGE - Conversation ad containing a tree of pre-determined messages delivered to the member's inbox
                SPONSORED_VIDEO - Sponsored videos.
                SPONSORED_UPDATE_CAROUSEL - Sponsored Carousels
                FOLLOW_COMPANY_V2 - Dynamic Follow Ad
                SPOTLIGHT_V2 - Dynamic Spotlight Ad
                JOBS_V2 - Dynamic Job Ad

          - name: click_uri
            description: |
                Required when creative type is TEXT_AD. Maximum character limit of 500 after URL encoding all special characters. 
                Limit does not include the "https://" prefix.

      - name: campaign_history
        description: Each record represents a 'version' of a campaign.
        identifier: "{{ var('linkedin_ads_campaign_history_identifier', 'campaign_history') }}"
        columns:
          - name: id
            description: Unique internal ID representing the campaign.
              
          - name: last_modified_time
            description: The timestamp of when the version was updated.
              
          - name: account_id
            description: The ID of the account the campaign belongs to.
              
          - name: campaign_group_id
            description: The ID of the campaign group the campaign belongs to.
              
          - name: created_time
            description: The timestamp of when the campaign was created.
              
          - name: name
            description: A label for the campaign.
              
          - name: version_tag
            description: An integer representation of the version of the campaign.
          
          - name: audience_expansion_enabled
            description: Boolean (default=false) representing whether Audience Expansion is enabled for the campaign provides query expansion for certain targeting criteria.

          - name: cost_type
            description: |
              CPM - Cost per thousand advertising impressions. If type=SPONSORED_INMAILS; cost per send(CPS) is measured as CPM x 1000.
              CPC- Cost per individual click on the associated link.
              CPV- Cost per view for video ads.

          - name: creative_selection
            description: |
              ROUND_ROBIN - Rotate through available creatives to serve them as evenly as possible.
              OPTIMIZED (default) - Bias selection taking into account such as expected performance. Not available for Message and Conversation Ads (type=SPONSORED_INMAILS).

          - name: daily_budget_amount
              ## left off here


      - name: campaign_group_history
        description: Each record represents a 'version' of a campaign group.
        identifier: "{{ var('linkedin_ads_campaign_group_history_identifier', 'campaign_group_history') }}"
        columns:
          - name: id
            description: Unique internal ID representing the campaign group.
            
          - name: last_modified_time
            description: The timestamp of when the version was updated.
            
          - name: account_id
            description: The ID of the account the campaign group belongs to.
            
          - name: created_time
            description: The timestamp of when the campaign group was created.
            
          - name: name
            description: A label for the campaign group.

          - name: backfilled
            description: Flag that denotes whether the campaign group was created organically or to backfill existing campaigns. This is a read-only field set by the system. Default = false

          - name: run_schedule_start
            description: Represents the inclusive (greater than or equal to) date when to start running the associated campaigns under this campaign group. This field is required.

          - name: run_schedule_end
            description: Represents the exclusive (strictly less than) date when to stop running the associated campaigns under this campaign group. If this field is unset, it indicates an open range with no end date. 
            
      - name: account_history
        description: Each record represents a 'version' of an account. 
        identifier: "{{ var('linkedin_ads_account_history_identifier', 'account_history') }}"
        columns:
          - name: id
            description: Unique internal ID representing the account.

          - name: last_modified_time
            description: The timestamp of when the version was updated.

          - name: created_time
            description: The timestamp of when the account was created.

          - name: name
            description: A label for the account.

          - name: currency
            description: The ISO 4217 currency code of the account, such as 'USD' for United States Dollar (default).

          - name: version_tag
            description: An integer representation of the version of the account.

          - name: notified_on_campaign_optimization
            description: Boolean (default=false) indicating if the campaign contact is notified about campaign optimization opportunities

          - name: notified_on_creative_approval
            description: Boolean (default=false) indicating if the creative contact is notified when a creative has been reviewed and approved

          - name: notified_on_creative_rejection
            description: Boolean (default=false) indicating if the creative contact is notified when a creative has been rejected due to content

          - name: notified_on_end_of_campaign
            description: Boolean (default=false) indicating if the campaign contact is notified when an associated campaign has been completed

          - name: status
            description: |
              ACTIVE - Account is active; this is the default state
              CANCELLED - Account has been permanently cancelled
              DRAFT - Account is in draft status, meaning it's not yet fully set up and it is not serving
              PENDING_DELETION - Denotes that the account has been requested to be deleted that is currently pending
              REMOVED - Denotes that the account was deleted, but must remain fetchable due to the existence of performance data.

          - name: type
            description: |
              BUSINESS - This is the only value allowed when creating accounts through the API.
              ENTERPRISE - This value cannot be used to create accounts through the API and is reserved for accounts created by LinkedIn's internal ad operations systems.

      - name: ad_analytics_by_campaign
        description: Each record in this table represents the daily performance of ads at the campaign level.
        identifier: "{{ var('linkedin_ads_ad_analytics_by_campaign_identifier', 'ad_analytics_by_campaign') }}"
        columns:
          - name: campaign_id
            description: The ID of the related campaign.

          - name: day
            description: The day of the activity.

          - name: clicks
            description: The count of chargeable clicks.

          - name: impressions
            description: This is the count of "impressions" for Direct Ads and Sponsored Updates and "sends" for InMails.

          - name: cost_in_local_currency
            description: The cost of the ads in the local currency.

          - name: cost_in_usd
            description: The cost of the ads in the USD.