version: 2

models:

  - name: stg_linkedin_ads__ad_analytics_by_creative
    description: Each record in this table represents the daily performance of ads at the creative level.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date_day
            - creative_id 
    columns:
      - name: creative_id
        description: The ID of the related creative.
        tests:
          - not_null

      - name: date_day
        description: The day of the activity.
        tests:
          - not_null

      - name: clicks
        description: The count of chargeable clicks.

      - name: impressions
        description: This is the count of "impressions" for Direct Ads and Sponsored Updates and "sends" for InMails.

      - name: cost
        description: The cost of the ads in the local currency or USD.

  - name: stg_linkedin_ads__ad_analytics_by_campaign
    description: Each record in this table represents the daily performance of ads at the campaign level.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - date_day
            - campaign_id 
    columns:
      - name: campaign_id
        description: The ID of the related creative.
        tests:
          - not_null

      - name: date_day
        description: The day of the activity.
        tests:
          - not_null

      - name: clicks
        description: The count of chargeable clicks.

      - name: impressions
        description: This is the count of "impressions" for Direct Ads and Sponsored Updates and "sends" for InMails.

      - name: cost
        description: The cost of the ads in the local currency or USD.

  - name: stg_linkedin_ads__creative_history
    description: Each record represents a 'version' of a creative.
    columns:
      - name: creative_id
        description: Unique internal ID representing the creative.
        tests:
          - not_null

      - name: last_modified_at
        description: The timestamp of when the version was updated.

      - name: created_at
        description: The timestamp of when the creative was created.

      - name: campaign_id
        description: The ID of the campaign the creative belongs to.

      - name: status
        description: |
          ACTIVE - Creative creation is complete and creative is available for review and serve.
          PAUSED - Creative creation is complete and creative is current, but should temporarily not be served. This status is not valid upon creation.
          DRAFT - Creative creation is incomplete and may still be edited.
          ARCHIVED - Creative creation is complete, but creative should not be served and should be separated from non-archived creatives in any UI.
          CANCELED - Creative is permanently canceled.

      - name: click_uri
        description: |
          Required when creative type is TEXT_AD. Maximum character limit of 500 after URL encoding all special characters. 
          Limit does not include the "https://" prefix.

      - name: base_url
        description: The base URL of the ad, extracted from the `click_uri`.

      - name: url_host
        description: The URL host of the ad, extracted from the `click_uri`.

      - name: url_path
        description: The URL path of the ad, extracted from the `click_uri`.

      - name: utm_source
        description: The utm_source parameter of the ad, extracted from the `click_uri`.

      - name: utm_medium
        description: The utm_medium parameter of the ad, extracted from the `click_uri`.

      - name: utm_campaign
        description: The utm_campaign parameter of the ad, extracted from the `click_uri`.

      - name: utm_content
        description: The utm_content parameter of the ad, extracted from the `click_uri`.

      - name: utm_term
        description: The utm_term parameter of the ad, extracted from the `click_uri`.

      - name: is_latest_version
        description: Boolean of whether the record is the latest version of the cretive.

  - name: stg_linkedin_ads__campaign_history
    description: Each record represents a 'version' of a campaign.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - version_tag
            - campaign_id 
    columns:
      - name: campaign_id
        description: Unique internal ID representing the campaign.
        tests:
          - not_null

      - name: last_modified_at
        description: The timestamp of when the version was updated.

      - name: account_id
        description: The ID of the account the campaign belongs to.

      - name: campaign_group_id
        description: The ID of the campaign group the campaign belongs to.

      - name: created_at
        description: The timestamp of when the campaign was created.

      - name: campaign_name
        description: A label for the campaign.

      - name: version_tag
        description: An integer representation of the version of the campaign.
        tests:
          - not_null

      - name: is_audience_expansion_enabled
        description: Boolean (default=false) representing whether Audience Expansion is enabled for the campaign provides query expansion for certain targeting criteria.

      - name: cost_type
        description: |
          CPM - Cost per thousand advertising impressions. If type=SPONSORED_INMAILS; cost per send(CPS) is measured as CPM x 1000.
          CPC- Cost per individual click on the associated link.
          CPV- Cost per view for video ads.

      - name: creative_selection
        description: |
          ROUND_ROBIN - Rotate through available creatives to serve them as evenly as possible.
          OPTIMIZED (default) - Bias selection taking into account such as expected performance. Not available for Message and Conversation Ads (type=SPONSORED_INMAILS).

      - name: daily_budget_amount
        description: Maximum amount to spend per day UTC. The amount of money as a real number string.
      
      - name: daily_budget_currency_code
        description: ISO currency code. The currency must match that of the parent account.
      
      - name: format
        description: The ad format on the campaign level. See https://docs.microsoft.com/en-us/linkedin/marketing/integrations/ads/campaign-formats?view=li-lms-2022-07
      
      - name: locale_country
        description: Locale of the campaign. An uppercase two-letter country code as defined by ISO-3166.

      - name: locale_language
        description: Locale of the campaign. A lowercase two-letter language code as defined by ISO-639.

      - name: objective_type
        description: >
          Campaign Objective type values. Click [here](https://docs.microsoft.com/en-us/linkedin/marketing/integrations/ads-reporting/ad-budget-pricing-type-combinations?view=li-lms-2022-07) for Campaign Objective descriptions. One of:
          - BRAND_AWARENESS
          - ENGAGEMENT
          - JOB_APPLICANTS
          - LEAD_GENERATION
          - WEBSITE_CONVERSIONS
          - WEBSITE_VISITS
          - VIDEO_VIEWS

      - name: is_offsite_delivery_enabled
        description: >
          Boolean indicating if this campaign to allowed to be served on the LinkedIn Audience Network to extend the reach of your campaign by delivering ads beyond the 
          LinkedIn feed to members on third-party apps and sites.	(default will be "True" from June 30, 2022)

      - name: optimization_target_type
        description: Determines how this campaign is optimized for spending. If this is not set, there is no optimization. Refer to the documentation here. Default = 'NONE'.

      - name: run_schedule_start_at
        description: Scheduled date range to run associated creatives. The start date must be non-null. Represents the inclusive (greater than or equal to) value in which to start the range.

      - name: run_schedule_end_at
        description: >
          Scheduled date range to run associated creatives. The start date must be non-null. Represents the exclusive (strictly less than) value in which to end the range, if provided.
      
      - name: status
        description: |
          ACTIVE - Denotes that the campaign is fully servable.
          PAUSED - Denotes that the campaign meets all requirements to be served, but temporarily should not be.
          ARCHIVED - Denotes that the campaign is presently inactive, and should mostly be hidden in the UI until un-archived.
          COMPLETED - Denotes that the campaign has reached a specified budgetary or chronological limit.
          CANCELED - Denotes that the campaign has been permanently canceled, such as when an advertising account is permanently closed.
          DRAFT - Denotes that the campaign is still being edited and not eligible for serving. Some validation will be postponed until the campaign is activated.
          PENDING_DELETION - Denotes that the campaign has been requested to be deleted that is currently pending.
          REMOVED - Denotes that the campaign was deleted, but must remain fetchable due to the existence of performance data.

      - name: type
        description: |
          TEXT_AD - Text-based ads that show up in the right column or top of the page on LinkedIn.
          SPONSORED_UPDATES - Native ads that promote a company's content updates in the LinkedIn feed.
          SPONSORED_INMAILS - Personalized messages with a call-to-action button delivered to a LinkedIn's member inbox.
          DYNAMIC - Ads that are dynamically personalized.
      
      - name: unit_cost_amount
        description: >
          This value is used as one of the following: amount to bid (for manual bidding), amount which is the target cost (for target cost bidding) per click, 
          impression, or other event depending on the pricing model, or cost cap (for cost cap bidding). The amount of money as a real number string. 
          The amount should be non-negative if the bidding strategy is manual, target cost, or cost cap bidding. The default is 0 with the currency code set to match that of the associated account.

      - name: unit_cost_currency_code
        description: >
          Amount to bid per click, impression, or other event depending on the pricing model. The default is 0 with the currency code set to match that of the associated account. 
          ISO currency code.

      - name: is_latest_version
        description: Boolean of whether the record is the latest version of the campaign.

  - name: stg_linkedin_ads__campaign_group_history
    description: Each record represents a 'version' of a campaign group.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - last_modified_at
            - campaign_group_id 
    columns:
      - name: campaign_group_id
        description: Unique internal ID representing the campaign group.
        tests:
          - not_null

      - name: last_modified_at
        description: The timestamp of when the version was updated.
        tests:
          - not_null
          
      - name: account_id
        description: The ID of the account the campaign group belongs to.
          
      - name: created_at
        description: The timestamp of when the campaign group was created.
          
      - name: campaign_group_name
        description: A label for the campaign group.
      
      - name: is_backfilled
        description: Flag that denotes whether the campaign group was created organically or to backfill existing campaigns. This is a read-only field set by the system. Default = false.

      - name: run_schedule_start_at
        description: Represents the inclusive (greater than or equal to) date when to start running the associated campaigns under this campaign group. This field is required.

      - name: run_schedule_end_at
        description: Represents the exclusive (strictly less than) date when to stop running the associated campaigns under this campaign group. If this field is unset, it indicates an open range with no end date. 
      
      - name: status
        description: >
          Status of campaign group. Possible values are:
          ACTIVE - Denotes that the campaign group is capable of serving ads, subject to run date and budget limitations (as well as any other limitations at the account or campaign level).
          ARCHIVED - Denotes that the campaign group is presently inactive, and should mostly be hidden in the UI until un-archived.
          CANCELLED - Denotes that the campaign group has been permanently canceled and cannot be reactivated. Not a settable status.
          DRAFT - Denotes that the campaign group is in a preliminary state and should temporarily not be served.
          PAUSED - Denotes that the campaign group meets all requirements to be served, but temporarily should not be.
          PENDING_DELETION - Denotes that the campaign group has been requested to be deleted that is currently pending.
          REMOVED - Denoted that the campaign group was deleted, but must remain fetchable due to the existence of performance data.

      - name: is_latest_version
        description: Boolean of whether the record is the latest version of the campaign group.

  - name: stg_linkedin_ads__account_history
    description: Each record represents a 'version' of an account. 
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - account_id
            - version_tag 
    columns:
      - name: account_id
        description: Unique internal ID representing the account.
        tests:
          - not_null

      - name: last_modified_at
        description: The timestamp of when the version was updated.

      - name: created_at
        description: The timestamp of when the account was created.

      - name: account_name
        description: A label for the account.

      - name: currency
        description: The ISO 4217 currency code of the account, such as 'USD' for United States Dollar (default).

      - name: version_tag
        description: An integer representation of the version of the account.
        tests:
          - not_null

      - name: status
        description: |
          ACTIVE - Account is active; this is the default state
          CANCELLED - Account has been permanently cancelled
          DRAFT - Account is in draft status, meaning it's not yet fully set up and it is not serving
          PENDING_DELETION - Denotes that the account has been requested to be deleted that is currently pending
          REMOVED - Denotes that the account was deleted, but must remain fetchable due to the existence of performance data.

      - name: type
        description: |
          BUSINESS - This is the only value allowed when creating accounts through the API.
          ENTERPRISE - This value cannot be used to create accounts through the API and is reserved for accounts created by LinkedIn's internal ad operations systems.

      - name: is_latest_version
        description: Boolean of whether the record is the latest version of the account.